"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[680],{9680:(v,_,i)=>{i.r(_),i.d(_,{BillsModule:()=>D});var f=i(9808),C=i(9560),h=i(5886),p=i(6166),l=i(5861),s=i(2382),e=i(4893),d=i(257),m=i(2340),g=i(520);let u=(()=>{class r{constructor(t){this.http=t,this.ulrConceptosDeGastos="catalogos/concepto_de_gastos",this.baseUrl=m.N.api}obtenerConceptoDeGastos(t){return this.http.get(this.baseUrl+this.ulrConceptosDeGastos+"/"+t)}guardarConceptoDeGastos(t){return this.http.post(this.baseUrl+this.ulrConceptosDeGastos,t)}cancelarConceptoDeGastos(t){return this.http.delete(this.baseUrl+this.ulrConceptosDeGastos+"/"+t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(g.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),b=(()=>{class r{constructor(t,o,n){this.activeModal=t,this.modalService=o,this.service=n,this.data=[],this.dataTemp=[],this.valueBuscador=""}ngOnInit(){this.service.obtenerConceptoDeGastos(0).subscribe(t=>{this.data=t.data,this.dataTemp=[...this.data]},t=>{})}ngAfterViewChecked(){window.dispatchEvent(new Event("resize"))}close(t=this){t.activeModal.close({})}filterDatatable(t){if(this.data=this.data,""===t.target.value)this.data=this.dataTemp;else{const o=t.target.value.toLowerCase(),n=this.data.filter(a=>-1!==a.nConcepto.toString().toLowerCase().indexOf(o)||!o||-1!==a.cDescripcion.toLowerCase().indexOf(o)||!o);this.data=n}}onClick(t){"click"==t.type&&(this.selectedRow&&this.selectedRow.nConcepto==t.row.nConcepto?this.activeModal.close({id:this.selectedRow.nConcepto}):this.selectedRow=t.row)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.Kz),e.Y36(d.FF),e.Y36(u))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-busqueda-conceptos-de-gastos"]],decls:11,vars:11,consts:[[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],["type","text","matInput","","placeholder","Buscar conceptos de gastos",3,"ngModel","keyup","ngModelChange"],[1,"material","shadow-none",3,"rows","loadingIndicator","columnMode","headerHeight","footerHeight","rowHeight","reorderable","limit","scrollbarH","activate"],["name","Folio","prop","nConcepto",3,"width"],["name","Descripci\xf3n","prop","cDescripcion"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"B\xfasqueda de conceptos de gastos"),e.qZA()(),e.TgZ(3,"div",2)(4,"input",3),e.NdJ("keyup",function(a){return o.filterDatatable(a)})("ngModelChange",function(a){return o.valueBuscador=a}),e.qZA(),e.TgZ(5,"ngx-datatable",4),e.NdJ("activate",function(a){return o.onClick(a)}),e._UZ(6,"ngx-datatable-column",5)(7,"ngx-datatable-column",6),e.qZA()(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return o.close()}),e._uU(10," Cerrar "),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngModel",o.valueBuscador),e.xp6(1),e.Q6J("rows",o.data)("loadingIndicator",o.loadingIndicator)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("reorderable",o.reorderable)("limit",10)("scrollbarH",!0),e.xp6(1),e.Q6J("width",100))},directives:[s.Fj,s.JJ,s.On,p.nE,p.UC],styles:[""]}),r})();var U=i(1969);function Z(r,c){1&r&&(e.TgZ(0,"p",26),e._uU(1,"\n                      *Obligatorio.\n                    "),e.qZA())}function T(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelar()}),e._uU(1,"Eliminar"),e.qZA()}}const y=[{path:"",component:(()=>{class r{constructor(t,o,n){this.util=t,this.modalService=o,this.conceptosService=n,this.conceptos=[]}ngOnInit(){this.form=new s.cw({nConcepto:new s.NI({value:"",disabled:!0},[s.kI.required]),cDescripcion:new s.NI("",s.kI.required)})}get nConcepto(){var t,o,n;return(null===(t=this.form.get("nConcepto"))||void 0===t?void 0:t.value)&&""!=(null===(o=this.form.get("nConcepto"))||void 0===o?void 0:o.value)?null===(n=this.form.get("nConcepto"))||void 0===n?void 0:n.value:0}get cDescripcion(){var t,o;return null!==(o=null===(t=this.form.get("cDescripcion"))||void 0===t?void 0:t.value)&&void 0!==o?o:""}limpiar(){this.form.reset()}obtenerConceptos(){var t=this;return(0,l.Z)(function*(){yield t.conceptosService.obtenerConceptoDeGastos(0).subscribe(function(){var o=(0,l.Z)(function*(n){""!==n.error?t.util.dialogError("Error al obtener conceptos de gastos."):t.conceptos=n.data});return function(n){return o.apply(this,arguments)}}(),o=>{t.util.dialogError("Error al obtener conceptos de gastos.")})})()}guardar(){var t=this;return(0,l.Z)(function*(){let o={nConcepto:t.nConcepto,cDescripcion:t.cDescripcion};yield t.conceptosService.guardarConceptoDeGastos(o).subscribe(function(){var n=(0,l.Z)(function*(a){""!==a.error?t.util.dialogError("Error al guardar el conceptos de gasto."):(t.limpiar(),t.util.dialogSuccess("Concepto de gasto guardado correctamente."))});return function(a){return n.apply(this,arguments)}}(),n=>{t.util.dialogError("Error al obtener conceptos de gastos.")})})()}openModal(){this.modalService.open(b,{centered:!0,backdrop:"static",keyboard:!1,modalDialogClass:"dialog-formulario-peque\xf1o"}).closed.subscribe(o=>{o&&o.id&&(this.form.controls.nConcepto.setValue(o.id),this.mostrarConcepto())})}seleccionar(t){console.log(t),this.form.controls.nConcepto.setValue(t.nConcepto),this.form.controls.cDescripcion.setValue(t.cDescripcion)}cancelar(){var t=this;this.util.dialogConfirm("\xbfEst\xe1 seguro que desea eliminar el concepto de gasto?").then(o=>{o.isConfirmed&&this.conceptosService.cancelarConceptoDeGastos(this.nConcepto).subscribe(function(){var n=(0,l.Z)(function*(a){t.util.dialogSuccess("Concepto de gasto eliminado correctamente."),t.form.reset(),t.obtenerConceptos()});return function(a){return n.apply(this,arguments)}}(),n=>{this.util.dialogError("Error el eliminar el concepto de gasto.")})})}mostrarConcepto(){this.conceptosService.obtenerConceptoDeGastos(this.nConcepto).subscribe(t=>{if(t){const o=t.data[0];o&&(this.form.controls.nConcepto.setValue(o.nConcepto),this.form.controls.cDescripcion.setValue(o.cDescripcion))}},t=>{})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(U.F),e.Y36(d.FF),e.Y36(u))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-bills"]],decls:88,vars:4,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["name","form",3,"formGroup"],[1,"row","mt-4"],[1,"col-sm-5"],[1,"form-label","col-sm-5","col-form-label","text-end"],[1,"col-sm-7"],[1,"input-group"],["type","text","formControlName","nConcepto",1,"form-control","form-control-sm","border-end-0"],[1,"input-group-text","border-start-0","bg-white"],[1,"feather","icon-search",3,"click"],["type","text","formControlName","cDescripcion",1,"form-control","form-control-sm","border-end-0"],["class","error p-0 mt-1 mb-1",4,"ngIf"],[1,"col-sm-2"],[1,"d-flex","justify-content-end","my-4"],["type","button",1,"btn","btn-warning","mx-2",3,"click"],["type","button","class","btn btn-dark mx-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mx-2",3,"disabled","click"],[1,"error","p-0","mt-1","mb-1"],["type","button",1,"btn","btn-dark","mx-2",3,"click"]],template:function(t,o){if(1&t&&(e._uU(0,"\n"),e.TgZ(1,"nav",0),e._uU(2,"\n  "),e.TgZ(3,"ol",1),e._uU(4,"\n    "),e.TgZ(5,"li",2)(6,"a",3),e._uU(7,"Configuraci\xf3n General"),e.qZA()(),e._uU(8,"\n    "),e.TgZ(9,"li",4),e._uU(10,"Concepto de Gastos"),e.qZA(),e._uU(11,"\n  "),e.qZA(),e._uU(12,"\n"),e.qZA(),e._uU(13,"\n\n"),e._uU(14,"\n"),e._uU(15,"\n \n"),e._uU(16,"\n"),e.TgZ(17,"div",5),e._uU(18,"\n  "),e.TgZ(19,"div",6),e._uU(20,"\n    "),e.TgZ(21,"div",7),e._uU(22,"\n      "),e.TgZ(23,"div",8),e._uU(24,"\n        "),e.TgZ(25,"h6",9),e._uU(26,"Agregar Concepto de Gastos"),e.qZA(),e._uU(27,"\n          "),e.TgZ(28,"form",10),e._uU(29,"\n\n            "),e.TgZ(30,"div",11),e._uU(31,"\n              "),e.TgZ(32,"div",12),e._uU(33,"\n                "),e.TgZ(34,"div",5),e._uU(35,"\n                  "),e.TgZ(36,"label",13),e._uU(37,"Folio"),e.qZA(),e._uU(38,"\n                  "),e.TgZ(39,"div",14),e._uU(40,"\n                    "),e.TgZ(41,"div",15),e._uU(42,"\n                      "),e._UZ(43,"input",16),e._uU(44,"\n                      "),e.TgZ(45,"span",17),e._uU(46,"\n                        "),e.TgZ(47,"i",18),e.NdJ("click",function(){return o.openModal()}),e.qZA(),e._uU(48,"\n                      "),e.qZA(),e._uU(49,"\n                    "),e.qZA(),e._uU(50,"\n                  "),e.qZA(),e._uU(51,"  \n                  "),e.TgZ(52,"label",13),e._uU(53,"Descripci\xf3n"),e.qZA(),e._uU(54,"\n                  "),e.TgZ(55,"div",14),e._uU(56,"\n                    "),e.TgZ(57,"div",15),e._uU(58,"\n                      "),e._UZ(59,"input",19),e._uU(60,"\n             \n  \n                    "),e.qZA(),e._uU(61,"\n                    "),e.YNc(62,Z,2,0,"p",20),e._uU(63,"\n                  "),e.qZA(),e._uU(64,"\n  \n  \n                "),e.qZA(),e._uU(65,"\n              "),e.qZA(),e._uU(66,"\n  \n              "),e._UZ(67,"div",21),e._uU(68,"\n  \n              "),e._UZ(69,"div",12),e._uU(70,"\n            "),e.qZA(),e._uU(71,"\n\n          "),e.qZA(),e._uU(72,"\n      "),e.qZA(),e._uU(73,"\n      "),e.TgZ(74,"div",22),e._uU(75,"\n        "),e.TgZ(76,"button",23),e.NdJ("click",function(){return o.limpiar()}),e._uU(77,"Limpiar"),e.qZA(),e._uU(78,"\n        "),e.YNc(79,T,2,0,"button",24),e._uU(80,"\n        "),e.TgZ(81,"button",25),e.NdJ("click",function(){return o.guardar()}),e._uU(82,"Guardar"),e.qZA(),e._uU(83,"\n      "),e.qZA(),e._uU(84,"\n    "),e.qZA(),e._uU(85,"\n  "),e.qZA(),e._uU(86,"\n"),e.qZA(),e._uU(87,"\n")),2&t){let n;e.xp6(28),e.Q6J("formGroup",o.form),e.xp6(34),e.Q6J("ngIf",null==(n=o.form.get("cEmpresa"))?null:n.hasError("required")),e.xp6(17),e.Q6J("ngIf",o.nConcepto>0),e.xp6(2),e.Q6J("disabled",o.form.invalid)}},directives:[C.yS,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,f.O5],styles:[""]}),r})()}];let D=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.ez,C.Bz.forChild(y),h.m,p.xD.forRoot({messages:{emptyMessage:"No hay datos disponibles",totalMessage:"total",selectedMessage:"selected"}})]]}),r})()},5861:(v,_,i)=>{function f(h,p,l,s,e,d,m){try{var g=h[d](m),u=g.value}catch(b){return void l(b)}g.done?p(u):Promise.resolve(u).then(s,e)}function C(h){return function(){var p=this,l=arguments;return new Promise(function(s,e){var d=h.apply(p,l);function m(u){f(d,s,e,m,g,"next",u)}function g(u){f(d,s,e,m,g,"throw",u)}m(void 0)})}}i.d(_,{Z:()=>C})}}]);