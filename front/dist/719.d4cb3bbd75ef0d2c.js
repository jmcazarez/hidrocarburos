"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[719],{1719:(b,v,i)=>{i.r(v),i.d(v,{ArticlesModule:()=>D});var g=i(9808),f=i(9560),_=i(5886),d=i(6166),c=i(5835),u=i(5861),r=i(2382),m=i(5226),h=i.n(m),t=i(4893),s=i(257),A=i(2111);let U=(()=>{class a{constructor(e,o,n){this.activeModal=e,this.modalService=o,this.service=n,this.data=[],this.dataTemp=[],this.valueBuscador=""}ngOnInit(){console.log("entro"),this.service.obtenerArticulos(0,-1).subscribe(e=>{this.data=e.data,this.dataTemp=[...this.data]},e=>{})}close(e=this){e.activeModal.close({})}filterDatatable(e){if(this.data=this.data,""===e.target.value)this.data=this.dataTemp;else{const o=e.target.value.toLowerCase(),n=this.data.filter(l=>-1!==l.nArticulo.toString().toLowerCase().indexOf(o)||!o||-1!==l.cDescripcionCorta.toLowerCase().indexOf(o)||!o||-1!==l.cDescripcionLarga.toLowerCase().indexOf(o)||!o);this.data=n}}onClick(e){"click"==e.type&&(this.selectedRow&&this.selectedRow.nArticulo==e.row.nArticulo?this.activeModal.close({id:this.selectedRow.nArticulo}):this.selectedRow=e.row)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.Kz),t.Y36(s.FF),t.Y36(A.N))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-busqueda-articles"]],decls:12,vars:11,consts:[[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],["type","text","matInput","","placeholder","Buscar art\xedculos",3,"ngModel","keyup","ngModelChange"],[1,"material","shadow-none",3,"rows","loadingIndicator","columnMode","headerHeight","footerHeight","rowHeight","reorderable","limit","scrollbarH","activate"],["name","Id. Articulo","prop","nArticulo",3,"width"],["name","Descripc\xedon larga","prop","cDescripcionLarga"],["name","Descripc\xedon corta","prop","cDescripcionCorta"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2,"Busqueda de at\xedculos"),t.qZA()(),t.TgZ(3,"div",2)(4,"input",3),t.NdJ("keyup",function(l){return o.filterDatatable(l)})("ngModelChange",function(l){return o.valueBuscador=l}),t.qZA(),t.TgZ(5,"ngx-datatable",4),t.NdJ("activate",function(l){return o.onClick(l)}),t._UZ(6,"ngx-datatable-column",5)(7,"ngx-datatable-column",6)(8,"ngx-datatable-column",7),t.qZA()(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return o.close()}),t._uU(11," Cerrar "),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngModel",o.valueBuscador),t.xp6(1),t.Q6J("rows",o.data)("loadingIndicator",o.loadingIndicator)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("reorderable",o.reorderable)("limit",10)("scrollbarH",!0),t.xp6(1),t.Q6J("width",80))},directives:[r.Fj,r.JJ,r.On,d.nE,d.UC],styles:[""]}),a})();var Z=i(1969);function C(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelar()}),t._uU(1,"Eliminar"),t.qZA()}}const T=function(){return{prefix:"",thousands:",",decimal:".",precision:2}},y=[{path:"",component:(()=>{class a{constructor(e,o,n,l){this.service=e,this.util=o,this.modalService=n,this.formBuilder=l}ngOnInit(){this.form=this.formBuilder.group({nArticulo:[{value:"",disabled:!0}],cDescripcionLarga:new r.NI("",r.kI.required),cDescripcionCorta:new r.NI("",r.kI.required),nStockMinimo:new r.NI(0,r.kI.required),bActivo:new r.NI(1),bNacional:new r.NI(1,r.kI.required)})}get f(){return this.form.controls}get nArticulo(){var e,o,n;return(null===(e=this.form.get("nArticulo"))||void 0===e?void 0:e.value)&&""!=(null===(o=this.form.get("nArticulo"))||void 0===o?void 0:o.value)?null===(n=this.form.get("nArticulo"))||void 0===n?void 0:n.value:0}get cDescripcionLarga(){var e,o;return null!==(o=null===(e=this.form.get("cDescripcionLarga"))||void 0===e?void 0:e.value)&&void 0!==o?o:""}get cDescripcionCorta(){var e,o;return null!==(o=null===(e=this.form.get("cDescripcionCorta"))||void 0===e?void 0:e.value)&&void 0!==o?o:""}get nStockMinimo(){var e,o;return null!==(o=null===(e=this.form.get("nStockMinimo"))||void 0===e?void 0:e.value)&&void 0!==o?o:""}get bNacional(){var e,o;return null!==(o=null===(e=this.form.get("bNacional"))||void 0===e?void 0:e.value)&&void 0!==o?o:1}guardar(){var e=this;return(0,u.Z)(function*(){const o={nArticulo:e.nArticulo,cDescripcionLarga:e.cDescripcionLarga,cDescripcionCorta:e.cDescripcionCorta,nStockMinimo:e.nStockMinimo,bNacional:e.bNacional};yield e.service.guardarArticulo(o).subscribe(function(){var n=(0,u.Z)(function*(l){""!==l.error?h().fire("Error",l.error.error,"error"):(e.limpiar(),e.util.dialogSuccess("Art\xedculo guardado correctamente."))});return function(l){return n.apply(this,arguments)}}(),n=>{e.util.dialogError("Error al guardar el Art\xedculo.")})})()}limpiar(){this.form.reset()}openArticulos(){console.log("click"),this.modalService.open(U,{centered:!0,backdrop:"static",keyboard:!1,modalDialogClass:"dialog-formulario-mediano"}).closed.subscribe(o=>{o&&(this.form.controls.nArticulo.setValue(o.id),0!=o.id&&this.mostrarDatosArticulo())})}mostrarDatosArticulo(){this.service.obtenerArticulos(this.nArticulo,-1).subscribe(e=>{if(e){const o=e.data[0];this.form.controls.cDescripcionLarga.setValue(o.cDescripcionLarga),this.form.controls.cDescripcionCorta.setValue(o.cDescripcionCorta),this.form.controls.nStockMinimo.setValue(o.nStockMinimo),this.form.controls.bNacional.setValue(o.bNacional)}},e=>{})}cancelar(){var e=this;this.util.dialogConfirm("\xbfEst\xe1 seguro que desea eliminar el art\xedculo?").then(o=>{o.isConfirmed&&this.service.cancelarArticulo(this.nArticulo).subscribe(function(){var n=(0,u.Z)(function*(l){e.util.dialogSuccess("Art\xedculo cancelado correctamente."),e.limpiar()});return function(l){return n.apply(this,arguments)}}(),n=>{this.util.dialogError("Error al eliminar el art\xedculo.")})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(A.N),t.Y36(Z.F),t.Y36(s.FF),t.Y36(r.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-articles"]],decls:110,vars:8,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["name","form",3,"formGroup"],[1,"row","mt-4"],[1,"col-sm-5"],[1,"form-label","col-sm-5","col-form-label","text-end"],[1,"col-sm-7"],[1,"input-group"],["type","text","id","id-usuario","formControlName","nArticulo",1,"form-control","form-control-sm","border-end-0",3,"disabled"],[1,"input-group-text","border-start-0","bg-white"],[1,"feather","icon-search",3,"click"],["type","text","placeholder","","formControlName","cDescripcionCorta","onfocus","this.select()",1,"form-control","form-control-sm"],["type","text","placeholder","","formControlName","cDescripcionLarga","onfocus","this.select()",1,"form-control","form-control-sm"],["type","text","currencyMask","","placeholder","","formControlName","nStockMinimo","onfocus","this.select()",1,"form-control","form-control-sm",3,"options"],[1,"col-sm-5",2,"padding-top","7px"],["type","radio","checked","","formControlName","bNacional",1,"form-check-input",3,"value"],["for","radioInline",1,"form-check-label"],["type","radio","formControlName","bNacional",1,"form-check-input",2,"margin-left","20px",3,"value"],["for","radioInline1",1,"form-check-label"],[1,"d-flex","justify-content-end","my-4"],["type","button",1,"btn","btn-warning","mx-2",3,"click"],["type","button","class","btn btn-dark mx-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mx-2",3,"disabled","click"],["type","button",1,"btn","btn-dark","mx-2",3,"click"]],template:function(e,o){1&e&&(t._uU(0,"\n"),t.TgZ(1,"nav",0),t._uU(2,"\n  "),t.TgZ(3,"ol",1),t._uU(4,"\n    "),t.TgZ(5,"li",2)(6,"a",3),t._uU(7,"Configuraci\xf3n General"),t.qZA()(),t._uU(8,"\n    "),t.TgZ(9,"li",4),t._uU(10,"Art\xedculos"),t.qZA(),t._uU(11,"\n  "),t.qZA(),t._uU(12,"\n"),t.qZA(),t._uU(13,"\n\n"),t._uU(14,"\n"),t._uU(15,"\n\n"),t._uU(16,"\n"),t.TgZ(17,"div",5),t._uU(18,"\n  "),t.TgZ(19,"div",6),t._uU(20,"\n    "),t.TgZ(21,"div",7),t._uU(22,"\n      "),t.TgZ(23,"div",8),t._uU(24,"\n        "),t.TgZ(25,"h6",9),t._uU(26,"Formulario de Art\xedculos"),t.qZA(),t._uU(27,"\n        "),t.TgZ(28,"form",10),t._uU(29,"\n\n\n          "),t.TgZ(30,"div",11),t._uU(31,"\n            "),t.TgZ(32,"div",12),t._uU(33,"\n              "),t.TgZ(34,"div",5),t._uU(35,"\n                "),t.TgZ(36,"label",13),t._uU(37,"Fol\xedo"),t.qZA(),t._uU(38,"\n                "),t.TgZ(39,"div",14),t._uU(40,"\n                  "),t.TgZ(41,"div",15),t._uU(42,"\n                    "),t._UZ(43,"input",16),t._uU(44,"\n                    "),t.TgZ(45,"span",17),t._uU(46,"\n                      "),t.TgZ(47,"i",18),t.NdJ("click",function(){return o.openArticulos()}),t.qZA(),t._uU(48,"\n                    "),t.qZA(),t._uU(49,"\n                  "),t.qZA(),t._uU(50,"\n                "),t.qZA(),t._uU(51,"\n                "),t.TgZ(52,"label",13),t._uU(53,"Descripci\xf3n corta"),t.qZA(),t._uU(54,"\n                "),t.TgZ(55,"div",14),t._uU(56,"\n                  "),t._UZ(57,"input",19),t._uU(58,"\n                "),t.qZA(),t._uU(59,"\n\n                "),t.TgZ(60,"label",13),t._uU(61,"Descripci\xf3n larga"),t.qZA(),t._uU(62,"\n                "),t.TgZ(63,"div",14),t._uU(64,"\n                  "),t._UZ(65,"input",20),t._uU(66,"\n                "),t.qZA(),t._uU(67,"\n\n                "),t.TgZ(68,"label",13),t._uU(69,"Stock m\xednimo"),t.qZA(),t._uU(70,"\n                "),t.TgZ(71,"div",14),t._uU(72,"\n                  "),t._UZ(73,"input",21),t._uU(74,"\n                "),t.qZA(),t._uU(75,"\n                "),t.TgZ(76,"label",13),t._uU(77,"Origen:"),t.qZA(),t._uU(78,"\n                "),t.TgZ(79,"div",22),t._uU(80,"\n                  "),t._UZ(81,"input",23),t._uU(82,"\n                  "),t.TgZ(83,"label",24),t._uU(84,"\n                    Nacional\n                  "),t.qZA(),t._uU(85,"\n                  "),t._UZ(86,"input",25),t._uU(87,"\n                  "),t.TgZ(88,"label",26),t._uU(89,"\n                    Importado\n                  "),t.qZA(),t._uU(90,"\n                "),t.qZA(),t._uU(91,"                               \n              "),t.qZA(),t._uU(92,"\n            "),t.qZA(),t._uU(93,"\n          "),t.qZA(),t._uU(94,"\n\n        "),t.qZA(),t._uU(95,"\n        "),t.TgZ(96,"div",27),t._uU(97,"\n          "),t.TgZ(98,"button",28),t.NdJ("click",function(){return o.limpiar()}),t._uU(99,"Limpiar"),t.qZA(),t._uU(100,"\n          "),t.YNc(101,C,2,0,"button",29),t._uU(102,"\n          "),t.TgZ(103,"button",30),t.NdJ("click",function(){return o.guardar()}),t._uU(104,"Guardar"),t.qZA(),t._uU(105,"\n        "),t.qZA(),t._uU(106,"\n      "),t.qZA(),t._uU(107,"\n    "),t.qZA(),t._uU(108,"\n  "),t.qZA(),t._uU(109,"\n"),t.qZA()),2&e&&(t.xp6(28),t.Q6J("formGroup",o.form),t.xp6(15),t.Q6J("disabled",!0),t.xp6(30),t.Q6J("options",t.DdM(7,T)),t.xp6(8),t.Q6J("value",1),t.xp6(5),t.Q6J("value",0),t.xp6(15),t.Q6J("ngIf",o.nArticulo>0),t.xp6(2),t.Q6J("disabled",o.form.invalid))},directives:[f.yS,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,c.g1,r._,g.O5],styles:[""]}),a})()}];let D=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[g.ez,f.Bz.forChild(y),_.m,c.zh,d.xD.forRoot({messages:{emptyMessage:"No hay datos disponibles",totalMessage:"total",selectedMessage:"selected"}})]]}),a})()},2111:(b,v,i)=>{i.d(v,{N:()=>d});var g=i(2340),f=i(4893),_=i(520);let d=(()=>{class c{constructor(r){this.http=r,this.urlArticulos="catalogos/articulos",this.baseUrl=g.N.api}obtenerArticulos(r,m){return this.http.get(this.baseUrl+this.urlArticulos+"/"+r+"/"+m)}guardarArticulo(r){return this.http.post(this.baseUrl+this.urlArticulos,r)}cancelarArticulo(r){return this.http.delete(this.baseUrl+this.urlArticulos+"/"+r)}}return c.\u0275fac=function(r){return new(r||c)(f.LFG(_.eN))},c.\u0275prov=f.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},5861:(b,v,i)=>{function g(_,d,c,u,r,m,h){try{var t=_[m](h),s=t.value}catch(A){return void c(A)}t.done?d(s):Promise.resolve(s).then(u,r)}function f(_){return function(){var d=this,c=arguments;return new Promise(function(u,r){var m=_.apply(d,c);function h(s){g(m,u,r,h,t,"next",s)}function t(s){g(m,u,r,h,t,"throw",s)}h(void 0)})}}i.d(v,{Z:()=>f})}}]);