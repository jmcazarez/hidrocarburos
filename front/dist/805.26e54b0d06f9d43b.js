"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[805],{3805:(E,v,s)=>{s.r(v),s.d(v,{SalesReportModule:()=>y});var u=s(9808),d=s(5861),i=s(2382),h=s(1764),m=s(2217),e=s(4893),Z=s(1075),f=s(1969),A=s(257),b=s(9238),T=s(5382),q=s(9066),U=s(8411),V=s(2111),C=s(72),g=s(9560);function I(l,c){if(1&l&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td",33),e._uU(20),e.ALo(21,"number"),e.qZA(),e.TgZ(22,"td",33),e._uU(23),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",33),e._uU(26),e.ALo(27,"currency"),e.qZA(),e.TgZ(28,"td",33),e._uU(29),e.ALo(30,"currency"),e.qZA(),e.TgZ(31,"td",33),e._uU(32),e.ALo(33,"currency"),e.qZA(),e.TgZ(34,"td",33),e._uU(35),e.ALo(36,"currency"),e.qZA(),e.TgZ(37,"td"),e._uU(38),e.qZA()()),2&l){const o=c.$implicit;e.xp6(2),e.Oqu(o.nVenta),e.xp6(2),e.Oqu(o.cFechaVenta),e.xp6(2),e.Oqu(o.cOrigen),e.xp6(2),e.Oqu(o.cDestino),e.xp6(2),e.Oqu(o.cVendedor),e.xp6(2),e.Oqu(o.cChofer),e.xp6(2),e.Oqu(o.cEquipo),e.xp6(2),e.Oqu(o.cPlaca),e.xp6(2),e.Oqu(o.cArticulo),e.xp6(2),e.Oqu(e.xi3(21,16,o.nCantidadEnviada,"1.2-2")),e.xp6(3),e.Oqu(e.xi3(24,19,o.nCantidadRecibida,"1.2-2")),e.xp6(3),e.Oqu(e.lcZ(27,22,o.nCostoLitro)),e.xp6(3),e.Oqu(e.lcZ(30,24,o.nTotal)),e.xp6(3),e.Oqu(e.lcZ(33,26,o.nAnticipo)),e.xp6(3),e.Oqu(e.lcZ(36,28,o.nTotal-o.nAnticipo)),e.xp6(3),e.Oqu(o.cFormaPago)}}let F=(()=>{class l{constructor(o,t,n,a,r,p,D,R,S){this.service=o,this.util=t,this.modalService=n,this.patterns=a,this.serviceEmpresa=r,this.serviceClientes=p,this.serviceEmpleados=D,this.serviceArticulo=R,this.spinner=S,this.compras=[],this.ventas=[]}ngOnInit(){var o=this;return(0,d.Z)(function*(){o.form=new i.cw({nVenta:new i.NI("",[]),nArticulo:new i.NI("",i.kI.required),cArticulo:new i.NI({value:"",disabled:!0},[]),dFechaInicio:new i.NI("",[]),dFechaFin:new i.NI("",[]),nVendedor:new i.NI("",i.kI.required),cVendedor:new i.NI({value:"",disabled:!0},[]),nOrigen:new i.NI("",i.kI.required),cOrigen:new i.NI({value:"",disabled:!0},[]),nDestino:new i.NI("",i.kI.required),cDestino:new i.NI({value:"",disabled:!0},[])})})()}get nVenta(){var o,t,n;return(null===(o=this.form.get("nVenta"))||void 0===o?void 0:o.value)&&""!=(null===(t=this.form.get("nVenta"))||void 0===t?void 0:t.value)?null===(n=this.form.get("nVenta"))||void 0===n?void 0:n.value:0}get nVendedor(){var o,t,n;return(null===(o=this.form.get("nVendedor"))||void 0===o?void 0:o.value)&&""!=(null===(t=this.form.get("nVendedor"))||void 0===t?void 0:t.value)?null===(n=this.form.get("nVendedor"))||void 0===n?void 0:n.value:0}get dFechaInicio(){var o;return null===(o=this.form.get("dFechaInicio"))||void 0===o?void 0:o.value}get dFechaFin(){var o;return null===(o=this.form.get("dFechaFin"))||void 0===o?void 0:o.value}get nArticulo(){var o,t,n;return(null===(o=this.form.get("nArticulo"))||void 0===o?void 0:o.value)&&""!=(null===(t=this.form.get("nArticulo"))||void 0===t?void 0:t.value)?null===(n=this.form.get("nArticulo"))||void 0===n?void 0:n.value:0}get nOrigen(){var o,t,n;return(null===(o=this.form.get("nOrigen"))||void 0===o?void 0:o.value)&&""!=(null===(t=this.form.get("nOrigen"))||void 0===t?void 0:t.value)?null===(n=this.form.get("nOrigen"))||void 0===n?void 0:n.value:0}get nDestino(){var o,t,n;return(null===(o=this.form.get("nDestino"))||void 0===o?void 0:o.value)&&""!=(null===(t=this.form.get("nDestino"))||void 0===t?void 0:t.value)?null===(n=this.form.get("nDestino"))||void 0===n?void 0:n.value:0}openModalEmpresas(){var o=this;return(0,d.Z)(function*(){const t=o.modalService.open(m.z,{centered:!0,backdrop:"static",keyboard:!1,modalDialogClass:"dialog-formulario-chico"});t.componentInstance.titulo="B\xfasqueda de empresas",t.componentInstance.props=[{cNombre:"Folio",cPropiedad:"nEmpresa"},{cNombre:"Empresa",cPropiedad:"cNombreEmpresa"}];const a=(yield o.serviceEmpresa.obtenerEmpresas(0).toPromise()).data.map(r=>({nEmpresa:r.nEmpresa,cNombreEmpresa:r.cNombreEmpresa}));t.componentInstance.data=a,t.componentInstance.dataTemp=a,t.closed.subscribe(r=>{console.log("value:",r),r&&r.id&&(o.asignarEmpresa(r),t.close())})})()}asignarEmpresa(o){this.form.controls.cOrigen.setValue(o.cDescripcion),this.form.controls.nOrigen.setValue(o.id)}openModalClientes(){var o=this;return(0,d.Z)(function*(){const t=o.modalService.open(m.z,{centered:!0,backdrop:"static",keyboard:!1,modalDialogClass:"dialog-formulario-chico"});t.componentInstance.titulo="B\xfasqueda de clientes",t.componentInstance.props=[{cNombre:"Folio",cPropiedad:"nCliente"},{cNombre:"Cliente",cPropiedad:"cDescripcion"}];const a=(yield o.serviceClientes.obtenerClientes(0).toPromise()).data.map(r=>({nCliente:r.nCliente,cDescripcion:r.cNombreCliente}));t.componentInstance.data=a,t.componentInstance.dataTemp=a,t.closed.subscribe(r=>{console.log("value:",r),r&&r.id&&(o.asignarCliente(r),t.close())})})()}asignarCliente(o){this.form.controls.cDestino.setValue(o.cDescripcion),this.form.controls.nDestino.setValue(o.id)}openModalVendedores(){var o=this;return(0,d.Z)(function*(){const t=o.modalService.open(m.z,{centered:!0,backdrop:"static",keyboard:!1,modalDialogClass:"dialog-formulario-chico"});t.componentInstance.titulo="B\xfasqueda de vendedores",t.componentInstance.props=[{cNombre:"Folio",cPropiedad:"nEmpleado"},{cNombre:"Vendedor",cPropiedad:"cDescripcion"}];const n=yield o.serviceEmpleados.obtenerEmpleados(0).toPromise();console.log(n);const a=n.data.map(r=>({nEmpleado:r.nEmpleado,cDescripcion:r.cNombreEmpleado}));t.componentInstance.data=a,t.componentInstance.dataTemp=a,t.closed.subscribe(r=>{console.log("value:",r),r&&r.id&&(o.asignarEmpleado(r),t.close())})})()}asignarEmpleado(o){this.form.controls.cVendedor.setValue(o.cDescripcion),this.form.controls.nVendedor.setValue(o.id)}openModalArticulos(){var o=this;return(0,d.Z)(function*(){const t=o.modalService.open(m.z,{centered:!0,backdrop:"static",keyboard:!1,modalDialogClass:"dialog-formulario-chico"});t.componentInstance.titulo="B\xfasqueda de art\xedculos",t.componentInstance.props=[{cNombre:"Folio",cPropiedad:"nArticulo"},{cNombre:"Art\xedculo",cPropiedad:"cDescripcion"}];const a=(yield o.serviceArticulo.obtenerArticulos(0,-1).toPromise()).data.map(r=>({nArticulo:r.nArticulo,cDescripcion:r.cDescripcionLarga}));t.componentInstance.data=a,t.componentInstance.dataTemp=a,t.closed.subscribe(r=>{console.log("value:",r),r&&r.id&&(o.asignarArticulo(r),t.close())})})()}asignarArticulo(o){this.form.controls.cArticulo.setValue(o.cDescripcion),this.form.controls.nArticulo.setValue(o.id)}consultar(){var o,t,n,a,r;this.spinner.show(),this.service.obtenerConsultaVentas(this.dFechaInicio?new Date(this.dFechaInicio).toISOString().split("T")[0]:"",this.dFechaFin?new Date(this.dFechaFin).toISOString().split("T")[0]:"",null!==(o=this.nVenta)&&void 0!==o?o:0,null!==(t=this.nOrigen)&&void 0!==t?t:0,null!==(n=this.nDestino)&&void 0!==n?n:0,null!==(a=this.nVendedor)&&void 0!==a?a:0,null!==(r=this.nArticulo)&&void 0!==r?r:0).subscribe(p=>{this.ventas=p.data,this.spinner.hide()},p=>{this.util.dialogError("Ocurri\xf3 un error al obtener las ventas."),this.spinner.hide()})}formatoFecha(o){return o?h(new Date(o).toISOString().split("T")[0]).format("DD/MM/YYYY"):""}limpiar(){this.form.controls.nVenta.setValue(""),this.form.controls.nOrigen.setValue(""),this.form.controls.cOrigen.setValue(""),this.form.controls.dFechaInicio.setValue(""),this.form.controls.dFechaFin.setValue(""),this.form.controls.nArticulo.setValue(""),this.form.controls.cArticulo.setValue(""),this.form.controls.nDestino.setValue(""),this.form.controls.cDestino.setValue(""),this.form.controls.nVendedor.setValue(""),this.form.controls.cVendedor.setValue(""),this.ventas=[]}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(Z.v),e.Y36(f.F),e.Y36(A.FF),e.Y36(b.e),e.Y36(T.P),e.Y36(q.$),e.Y36(U.J),e.Y36(V.N),e.Y36(C.t2))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-sales-report"]],decls:104,vars:2,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"formGroup"],[1,"row","mt-4"],[1,"col-sm-5"],[1,"form-label","col-sm-3","col-form-label","text-end"],[1,"col-sm-7"],[1,"input-group","mb-1"],["type","text","formControlName","nVenta",1,"form-control","form-control-sm"],["type","text","formControlName","cOrigen",1,"form-control","form-control-sm","border-end-0"],[1,"input-group-text","border-start-0","bg-white"],[1,"feather","icon-search",3,"click"],["type","text","formControlName","cDestino",1,"form-control","form-control-sm","border-end-0"],["type","text","formControlName","cVendedor",1,"form-control","form-control-sm","border-end-0"],["type","text","formControlName","cArticulo",1,"form-control","form-control-sm","border-end-0"],[1,"col-sm-2"],[1,"form-label","col-sm-5","col-form-label","text-end"],["type","date","formControlName","dFechaInicio",1,"form-control","form-control-sm"],["type","date","formControlName","dFechaFin",1,"form-control","form-control-sm"],[1,"d-flex","justify-content-end","my-4"],["type","button",1,"btn","btn-warning","mx-2",3,"click"],["type","button",1,"btn","btn-primary","mx-2",3,"click"],[1,"table-responsive","my-5"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"text-end"]],template:function(o,t){1&o&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Ventas"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Reportes"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Reporte de ventas"),e.qZA(),e.TgZ(13,"form",10)(14,"div",11)(15,"div",12)(16,"div",5)(17,"label",13),e._uU(18,"Folio venta"),e.qZA(),e.TgZ(19,"div",14)(20,"div",15),e._UZ(21,"input",16),e.qZA()(),e.TgZ(22,"label",13),e._uU(23,"Origen"),e.qZA(),e.TgZ(24,"div",14)(25,"div",15),e._UZ(26,"input",17),e.TgZ(27,"span",18)(28,"i",19),e.NdJ("click",function(){return t.openModalEmpresas()}),e.qZA()()()(),e.TgZ(29,"label",13),e._uU(30,"Destino"),e.qZA(),e.TgZ(31,"div",14)(32,"div",15),e._UZ(33,"input",20),e.TgZ(34,"span",18)(35,"i",19),e.NdJ("click",function(){return t.openModalClientes()}),e.qZA()()()(),e.TgZ(36,"label",13),e._uU(37,"Vendedor"),e.qZA(),e.TgZ(38,"div",14)(39,"div",15),e._UZ(40,"input",21),e.TgZ(41,"span",18)(42,"i",19),e.NdJ("click",function(){return t.openModalVendedores()}),e.qZA()()()(),e.TgZ(43,"label",13),e._uU(44,"Producto"),e.qZA(),e.TgZ(45,"div",14)(46,"div",15),e._UZ(47,"input",22),e.TgZ(48,"span",18)(49,"i",19),e.NdJ("click",function(){return t.openModalArticulos()}),e.qZA()()()()()(),e._UZ(50,"div",23),e.TgZ(51,"div",12)(52,"div",5)(53,"label",24),e._uU(54,"Desde"),e.qZA(),e.TgZ(55,"div",14),e._UZ(56,"input",25),e.qZA(),e.TgZ(57,"label",24),e._uU(58,"Hasta"),e.qZA(),e.TgZ(59,"div",14),e._UZ(60,"input",26),e.qZA()()()()(),e.TgZ(61,"div",27)(62,"button",28),e.NdJ("click",function(){return t.limpiar()}),e._uU(63,"Limpiar"),e.qZA(),e.TgZ(64,"button",29),e.NdJ("click",function(){return t.consultar()}),e._uU(65,"Consultar"),e.qZA()(),e.TgZ(66,"div",30)(67,"table",31)(68,"thead")(69,"tr")(70,"th"),e._uU(71,"Folio"),e.qZA(),e.TgZ(72,"th"),e._uU(73,"Fecha"),e.qZA(),e.TgZ(74,"th"),e._uU(75,"Origen"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"Destino"),e.qZA(),e.TgZ(78,"th"),e._uU(79,"Vendedor"),e.qZA(),e.TgZ(80,"th"),e._uU(81,"Chofer"),e.qZA(),e.TgZ(82,"th"),e._uU(83,"Equipo"),e.qZA(),e.TgZ(84,"th"),e._uU(85,"Placa"),e.qZA(),e.TgZ(86,"th"),e._uU(87,"Producto"),e.qZA(),e.TgZ(88,"th"),e._uU(89,"Cant. enviada"),e.qZA(),e.TgZ(90,"th"),e._uU(91,"Cant. recibida"),e.qZA(),e.TgZ(92,"th"),e._uU(93,"Costo litro"),e.qZA(),e.TgZ(94,"th"),e._uU(95,"Valor"),e.qZA(),e.TgZ(96,"th"),e._uU(97,"Anticipo"),e.qZA(),e.TgZ(98,"th"),e._uU(99,"Saldo"),e.qZA(),e.TgZ(100,"th"),e._uU(101,"Forma de pago"),e.qZA()()(),e.TgZ(102,"tbody"),e.YNc(103,I,39,30,"tr",32),e.qZA()()()()()()()),2&o&&(e.xp6(13),e.Q6J("formGroup",t.form),e.xp6(90),e.Q6J("ngForOf",t.ventas))},directives:[g.yS,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,u.sg],pipes:[u.JJ,u.H9],styles:[""]}),l})();var N=s(5835),O=s(5886);const _=[{path:"",component:F}];let y=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[u.ez,g.Bz.forChild(_),O.m,N.zh]]}),l})()}}]);