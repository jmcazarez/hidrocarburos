"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[938],{1938:(Z,C,i)=>{i.r(C),i.d(C,{DriversModule:()=>q});var d=i(9808),g=i(9560),_=i(5886),s=i(5861),t=i(2382),e=i(4893),u=i(257),m=i(480),f=i(6166);let p=(()=>{class a{constructor(o,r,n){this.activeModal=o,this.modalService=r,this.service=n,this.data=[],this.dataTemp=[],this.valueBuscador=""}ngOnInit(){this.service.obtenerChoferes(0,-1).subscribe(o=>{this.data=o.data,this.dataTemp=[...this.data]},o=>{})}ngAfterViewChecked(){window.dispatchEvent(new Event("resize"))}close(o=this){o.activeModal.close({})}filterDatatable(o){if(this.data=this.data,""===o.target.value)this.data=this.dataTemp;else{const r=o.target.value.toLowerCase(),n=this.data.filter(l=>!(-1===l.nChofer.toString().toLowerCase().indexOf(r)&&r&&-1===l.cNombre.toLowerCase().indexOf(r)&&r&&-1===l.cApellidoPaterno.toLowerCase().indexOf(r)&&r&&-1===l.cApellidoMaterno.toLowerCase().indexOf(r)&&r&&-1===l.cRFC.toLowerCase().indexOf(r)&&r));this.data=n}}onClick(o){"click"==o.type&&(this.selectedRow&&this.selectedRow.nChofer==o.row.nChofer?this.activeModal.close({id:this.selectedRow.nChofer}):this.selectedRow=o.row)}}return a.\u0275fac=function(o){return new(o||a)(e.Y36(u.Kz),e.Y36(u.FF),e.Y36(m.b))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-busqueda-chofer"]],decls:14,vars:10,consts:[[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],["type","text","matInput","","placeholder","Buscar",3,"ngModel","keyup","ngModelChange"],[1,"material","shadow-none",3,"rows","loadingIndicator","columnMode","headerHeight","footerHeight","rowHeight","reorderable","limit","scrollbarH","activate"],["name","Folio","prop","nChofer"],["name","Nombre","prop","cNombre"],["name","Apellido paterno","prop","cApellidoPaterno"],["name","Apellido materno","prop","cApellidoPaterno"],["name","RFC","prop","cRFC"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"B\xfasqueda de choferes"),e.qZA()(),e.TgZ(3,"div",2)(4,"input",3),e.NdJ("keyup",function(l){return r.filterDatatable(l)})("ngModelChange",function(l){return r.valueBuscador=l}),e.qZA(),e.TgZ(5,"ngx-datatable",4),e.NdJ("activate",function(l){return r.onClick(l)}),e._UZ(6,"ngx-datatable-column",5)(7,"ngx-datatable-column",6)(8,"ngx-datatable-column",7)(9,"ngx-datatable-column",8)(10,"ngx-datatable-column",9),e.qZA()(),e.TgZ(11,"div",10)(12,"button",11),e.NdJ("click",function(){return r.close()}),e._uU(13," Cerrar "),e.qZA()()),2&o&&(e.xp6(4),e.Q6J("ngModel",r.valueBuscador),e.xp6(1),e.Q6J("rows",r.data)("loadingIndicator",r.loadingIndicator)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("reorderable",r.reorderable)("limit",10)("scrollbarH",!0))},directives:[t.Fj,t.JJ,t.On,f.nE,f.UC],styles:[""]}),a})();var h=i(1969),b=i(5845);function A(a,c){if(1&a&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&a){const o=c.$implicit;e.Q6J("ngValue",o.nFletera),e.xp6(1),e.Oqu(o.cDescripcion)}}function T(a,c){if(1&a){const o=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){return e.CHM(o),e.oxw().eliminar()}),e._uU(1,"Eliminar"),e.qZA()}}const U=function(a){return{"has-error":a}},F=[{path:"",component:(()=>{class a{constructor(o,r,n,l){this.util=o,this.modalService=r,this.service=n,this.serviceFletera=l,this.fleteras=[],this.form=new t.cw({nChofer:new t.NI({value:"",disabled:!0},[t.kI.required]),cRFC:new t.NI({value:"",disabled:!1}),cNombre:new t.NI({value:"",disabled:!1},[t.kI.required]),cApellidoPaterno:new t.NI({value:"",disabled:!1},[t.kI.required]),cApellidoMaterno:new t.NI({value:"",disabled:!1}),cLicencia:new t.NI({value:"",disabled:!1}),nAntiguedad:new t.NI({value:"",disabled:!1}),nFletera:new t.NI({value:"",disabled:!1})})}ngOnInit(){var o=this;return(0,s.Z)(function*(){yield o.obtenerCatalogosFletera()})()}get nChofer(){var o,r,n;return(null===(o=this.form.get("nChofer"))||void 0===o?void 0:o.value)&&""!=(null===(r=this.form.get("nChofer"))||void 0===r?void 0:r.value)?null===(n=this.form.get("nChofer"))||void 0===n?void 0:n.value:0}get cRFC(){var o,r;return null!==(r=null===(o=this.form.get("cRFC"))||void 0===o?void 0:o.value)&&void 0!==r?r:""}get cNombre(){var o,r;return null!==(r=null===(o=this.form.get("cNombre"))||void 0===o?void 0:o.value)&&void 0!==r?r:""}get cApellidoPaterno(){var o,r;return null!==(r=null===(o=this.form.get("cApellidoPaterno"))||void 0===o?void 0:o.value)&&void 0!==r?r:""}get cApellidoMaterno(){var o,r;return null!==(r=null===(o=this.form.get("cApellidoMaterno"))||void 0===o?void 0:o.value)&&void 0!==r?r:""}get cLicencia(){var o,r;return null!==(r=null===(o=this.form.get("cLicencia"))||void 0===o?void 0:o.value)&&void 0!==r?r:""}get nAntiguedad(){var o,r,n;return(null===(o=this.form.get("nAntiguedad"))||void 0===o?void 0:o.value)&&""!=(null===(r=this.form.get("nAntiguedad"))||void 0===r?void 0:r.value)?null===(n=this.form.get("nAntiguedad"))||void 0===n?void 0:n.value:0}get nFletera(){var o,r,n;return(null===(o=this.form.get("nFletera"))||void 0===o?void 0:o.value)&&""!=(null===(r=this.form.get("nFletera"))||void 0===r?void 0:r.value)?null===(n=this.form.get("nFletera"))||void 0===n?void 0:n.value:0}obtenerCatalogosFletera(){this.serviceFletera.obtenerFleteras(0).subscribe(o=>{console.log(o.data),this.fleteras=o.data})}openModal(){this.modalService.open(p,{centered:!0,backdrop:"static",keyboard:!1,modalDialogClass:"dialog-formulario-mediano"}).closed.subscribe(r=>{console.log("value:",r),r&&(this.form.controls.nChofer.setValue(r.id),this.mostrarDatosChofer())})}mostrarDatosChofer(){this.service.obtenerChoferes(this.nChofer,-1).subscribe(o=>{if(o){const r=o.data[0];this.form.controls.cRFC.setValue(r.cRFC),this.form.controls.cNombre.setValue(r.cNombre),this.form.controls.cApellidoPaterno.setValue(r.cApellidoPaterno),this.form.controls.cApellidoMaterno.setValue(r.cApellidoMaterno),this.form.controls.cLicencia.setValue(r.cLicencia),this.form.controls.nAntiguedad.setValue(r.nAntiguedad),this.form.controls.nFletera.setValue(r.nFletera)}},o=>{})}guardar(){var o=this;return(0,s.Z)(function*(){o.util.dialogConfirm("\xbfEst\xe1 seguro que desea guardar el chofer?").then(r=>{r.isConfirmed&&o.service.guardarChofer({nChofer:o.nChofer,cNombre:o.cNombre,cApellidoPaterno:o.cApellidoPaterno,cApellidoMaterno:o.cApellidoMaterno,cRFC:o.cRFC,cLicencia:o.cLicencia,nAntiguedad:o.nAntiguedad,nFletera:o.nFletera}).subscribe(function(){var l=(0,s.Z)(function*(v){""!==v.error?o.util.dialogError(v.error.error.type):(console.log(v),o.limpiar(),o.util.dialogSuccess("Chofer guardado correctamente."))});return function(v){return l.apply(this,arguments)}}(),l=>{o.util.dialogError("Error al guardar el chofer.")})})})()}eliminar(){var o=this;this.util.dialogConfirm("\xbfEst\xe1 seguro que desea eliminar al chofer?").then(r=>{r.isConfirmed&&this.service.eliminarChofer(this.nChofer).subscribe(function(){var n=(0,s.Z)(function*(l){o.util.dialogSuccess("Chofer eliminado correctamente."),o.limpiar()});return function(l){return n.apply(this,arguments)}}(),n=>{this.util.dialogError("Error al eliminar el chofer.")})})}limpiar(){this.form.reset()}}return a.\u0275fac=function(o){return new(o||a)(e.Y36(h.F),e.Y36(u.FF),e.Y36(m.b),e.Y36(b.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-drivers"]],decls:137,vars:14,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"formGroup"],[1,"row","mt-4"],[1,"col-sm-5"],[1,"form-label","col-sm-5","col-form-label","text-end"],[1,"col-sm-7"],[1,"input-group"],["type","text","placeholder","","formControlName","nChofer",1,"form-control","form-control-sm"],[1,"input-group-text","border-start-0","bg-white"],[1,"feather","icon-search",3,"click"],["type","text","placeholder","","formControlName","cRFC",1,"form-control","form-control-sm"],["type","text","placeholder","","formControlName","cNombre",1,"form-control","form-control-sm",3,"ngClass"],["type","text","placeholder","","formControlName","cApellidoPaterno",1,"form-control","form-control-sm",3,"ngClass"],["type","text","placeholder","","formControlName","cApellidoMaterno",1,"form-control","form-control-sm"],["type","text","placeholder","","formControlName","cLicencia",1,"form-control","form-control-sm"],["type","text","placeholder","","formControlName","nAntiguedad",1,"form-control","form-control-sm"],["formControlName","nFletera",1,"form-control","form-control-sm",3,"ngClass"],[3,"value"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-sm-2"],[1,"d-flex","justify-content-end","my-4"],["type","button",1,"btn","btn-warning","mx-2",3,"click"],["type","button","class","btn btn-danger mx-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mx-2",3,"disabled","click"],[3,"ngValue"],["type","button",1,"btn","btn-danger","mx-2",3,"click"]],template:function(o,r){if(1&o&&(e._uU(0,"\n"),e.TgZ(1,"nav",0),e._uU(2,"\n  "),e.TgZ(3,"ol",1),e._uU(4,"\n    "),e.TgZ(5,"li",2)(6,"a",3),e._uU(7,"Configuraci\xf3n General"),e.qZA()(),e._uU(8,"\n    "),e.TgZ(9,"li",4),e._uU(10,"Choferes"),e.qZA(),e._uU(11,"\n  "),e.qZA(),e._uU(12,"\n"),e.qZA(),e._uU(13,"\n\n"),e._uU(14,"\n"),e._uU(15,"\n\n"),e._uU(16,"\n"),e.TgZ(17,"div",5),e._uU(18,"\n  "),e.TgZ(19,"div",6),e._uU(20,"\n    "),e.TgZ(21,"div",7),e._uU(22,"\n      "),e.TgZ(23,"div",8),e._uU(24,"\n        "),e.TgZ(25,"h6",9),e._uU(26,"Formulario de Choferes"),e.qZA(),e._uU(27,"\n        "),e.TgZ(28,"form",10),e._uU(29,"\n\n          "),e.TgZ(30,"div",11),e._uU(31,"\n            "),e.TgZ(32,"div",12),e._uU(33,"\n              "),e.TgZ(34,"div",5),e._uU(35,"\n                "),e.TgZ(36,"label",13),e._uU(37,"Folio"),e.qZA(),e._uU(38,"\n                "),e.TgZ(39,"div",14),e._uU(40,"\n                  "),e.TgZ(41,"div",15),e._uU(42,"\n                    "),e._UZ(43,"input",16),e._uU(44,"\n                    "),e.TgZ(45,"span",17),e._uU(46,"\n                      "),e.TgZ(47,"i",18),e.NdJ("click",function(){return r.openModal()}),e.qZA(),e._uU(48,"\n                    "),e.qZA(),e._uU(49,"\n                  "),e.qZA(),e._uU(50,"\n                "),e.qZA(),e._uU(51,"\n                "),e.TgZ(52,"label",13),e._uU(53,"RFC "),e.qZA(),e._uU(54,"\n                "),e.TgZ(55,"div",14),e._uU(56,"\n                  "),e._UZ(57,"input",19),e._uU(58,"\n                "),e.qZA(),e._uU(59,"\n                "),e.TgZ(60,"label",13),e._uU(61,"Nombre "),e.qZA(),e._uU(62,"\n                "),e.TgZ(63,"div",14),e._uU(64,"\n                  "),e._UZ(65,"input",20),e._uU(66,"\n                "),e.qZA(),e._uU(67,"\n\n                "),e.TgZ(68,"label",13),e._uU(69,"Apellido Paterno "),e.qZA(),e._uU(70,"\n                "),e.TgZ(71,"div",14),e._uU(72,"\n                  "),e._UZ(73,"input",21),e._uU(74,"\n                "),e.qZA(),e._uU(75,"\n\n                "),e.TgZ(76,"label",13),e._uU(77,"Apellido Materno"),e.qZA(),e._uU(78,"\n                "),e.TgZ(79,"div",14),e._uU(80,"\n                  "),e._UZ(81,"input",22),e._uU(82,"\n\n                "),e.qZA(),e._uU(83,"\n\n                "),e.TgZ(84,"label",13),e._uU(85,"No. Licencia "),e.qZA(),e._uU(86,"\n                "),e.TgZ(87,"div",14),e._uU(88,"\n                  "),e._UZ(89,"input",23),e._uU(90,"\n                "),e.qZA(),e._uU(91,"\n\n                "),e.TgZ(92,"label",13),e._uU(93,"Antiguedad"),e.qZA(),e._uU(94,"\n                "),e.TgZ(95,"div",14),e._uU(96,"\n                  "),e._UZ(97,"input",24),e._uU(98,"\n                "),e.qZA(),e._uU(99,"\n\n                "),e.TgZ(100,"label",13),e._uU(101,"CIA (Fletera)"),e.qZA(),e._uU(102,"\n                "),e.TgZ(103,"div",14),e._uU(104,"\n                  "),e.TgZ(105,"select",25),e._uU(106,"\n                    "),e.TgZ(107,"option",26),e._uU(108,"Seleccione ..."),e.qZA(),e._uU(109,"\n                   "),e.YNc(110,A,2,2,"option",27),e._uU(111," \n                  "),e.qZA(),e._uU(112,"\n                "),e.qZA(),e._uU(113,"\n\n              "),e.qZA(),e._uU(114,"\n            "),e.qZA(),e._uU(115,"\n\n            "),e._UZ(116,"div",28),e._uU(117,"\n\n            "),e._UZ(118,"div",12),e._uU(119,"\n          "),e.qZA(),e._uU(120,"\n\n        "),e.qZA(),e._uU(121,"\n        "),e.TgZ(122,"div",29),e._uU(123,"\n          "),e.TgZ(124,"button",30),e.NdJ("click",function(){return r.limpiar()}),e._uU(125,"Limpiar"),e.qZA(),e._uU(126,"\n          "),e.YNc(127,T,2,0,"button",31),e._uU(128,"\n          "),e.TgZ(129,"button",32),e.NdJ("click",function(){return r.guardar()}),e._uU(130,"Guardar"),e.qZA(),e._uU(131,"\n        "),e.qZA(),e._uU(132,"\n      "),e.qZA(),e._uU(133,"\n    "),e.qZA(),e._uU(134,"\n  "),e.qZA(),e._uU(135,"\n"),e.qZA(),e._uU(136,"\n")),2&o){let n,l,v;e.xp6(28),e.Q6J("formGroup",r.form),e.xp6(37),e.Q6J("ngClass",e.VKq(8,U,null==(n=r.form.get("cNombre"))?null:n.hasError("required"))),e.xp6(8),e.Q6J("ngClass",e.VKq(10,U,null==(l=r.form.get("cApellidoPaterno"))?null:l.hasError("required"))),e.xp6(32),e.Q6J("ngClass",e.VKq(12,U,null==(v=r.form.get("nFletera"))?null:v.hasError("required"))),e.xp6(2),e.Q6J("value",""),e.xp6(3),e.Q6J("ngForOf",r.fleteras),e.xp6(17),e.Q6J("ngIf",r.nChofer>0),e.xp6(2),e.Q6J("disabled",r.form.invalid)}},directives:[g.yS,t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,d.mk,t.EJ,t.YN,t.Kr,d.sg,d.O5],styles:[""]}),a})()}];let q=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[d.ez,g.Bz.forChild(F),_.m,f.xD.forRoot({messages:{emptyMessage:"No hay datos disponibles",totalMessage:"total",selectedMessage:"selected"}})]]}),a})()},480:(Z,C,i)=>{i.d(C,{b:()=>s});var d=i(2340),g=i(4893),_=i(520);let s=(()=>{class t{constructor(u){this.http=u,this.urlChoferes="catalogos/choferes",this.baseUrl=d.N.api}obtenerChoferes(u,m){return this.http.get(this.baseUrl+this.urlChoferes+"/"+u+"/"+m)}guardarChofer(u){return this.http.post(this.baseUrl+this.urlChoferes,u)}eliminarChofer(u){return this.http.delete(this.baseUrl+this.urlChoferes+"/"+u)}}return t.\u0275fac=function(u){return new(u||t)(g.LFG(_.eN))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},5861:(Z,C,i)=>{function d(_,s,t,e,u,m,f){try{var p=_[m](f),h=p.value}catch(b){return void t(b)}p.done?s(h):Promise.resolve(h).then(e,u)}function g(_){return function(){var s=this,t=arguments;return new Promise(function(e,u){var m=_.apply(s,t);function f(h){d(m,e,u,f,p,"next",h)}function p(h){d(m,e,u,f,p,"throw",h)}f(void 0)})}}i.d(C,{Z:()=>g})}}]);